{% if block.settings.enable_generation %}
  <div id="ai-sdk-decor-app" data-shop="{{ shop.permanent_domain }}" data-product-id="{{ product.id }}"></div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
        var script = document.createElement("script");
        script.src = "https://ai-sdk-decor.vercel.app/embed.js";
        script.async = true;
        document.body.appendChild(script);
        
        script.onload = function () {
            if (window.AiSdkDecor) {
                window.AiSdkDecor.init({
                    shop: document.getElementById("ai-sdk-decor-app").getAttribute("data-shop"),
                    productId: document.getElementById("ai-sdk-decor-app").getAttribute("data-product-id")
                });
            }
        };
    });
  </script>
{% endif %}
